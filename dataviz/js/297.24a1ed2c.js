(self["webpackChunkv_slide_vue"]=self["webpackChunkv_slide_vue"]||[]).push([[297],{1561:function(e,t,o){"use strict";o.r(t);var a=o(8081),n=o.n(a),l=o(3645),i=o.n(l),r=i()(n());r.push([e.id,".root[data-v-e341dc82],.workingslide[data-v-e341dc82]{width:100%;overflow-y:scroll}.workingslide[data-v-e341dc82]{display:flex;flex-wrap:wrap;justify-content:space-evenly;text-align:left}[data-v-e341dc82]::-webkit-scrollbar{display:none}.hide[data-v-e341dc82],.layout[data-v-e341dc82],.new[data-v-e341dc82]{margin:20px;width:30%;min-width:300px;height:300px;border-radius:10px}.new[data-v-e341dc82]{text-align:center;padding-top:100px}.hide[data-v-e341dc82]{visibility:hidden}.cover[data-v-e341dc82]{width:400%;height:400%;transform:scale(.25);transform-origin:0 0;cursor:pointer}",""]),t["default"]=r},7243:function(e,t,o){"use strict";o.r(t);var a=o(8081),n=o.n(a),l=o(3645),i=o.n(l),r=i()(n());r.push([e.id,".chart[data-v-10654808],.workingslide[data-v-10654808]{width:100%;height:100%;outline:1px solid hsla(0,0%,47%,.322)}.right[data-v-10654808]{width:100%;height:100%;display:grid;grid-template-rows:50px 1fr}.header[data-v-10654808]{display:grid;grid-template-columns:1fr 120px;border-bottom:1px solid hsla(0,0%,47%,.322);padding:10px}[data-v-10654808]::-webkit-scrollbar{display:none}.gridlayout[data-v-10654808]{overflow-y:auto;width:100%;height:100%}.insideGridItem[data-v-10654808]{box-sizing:border-box;border:0 solid;border-radius:5px;background-color:#f7f8fa;outline:0 solid #777;box-shadow:-2px -2px 5px rgba(243,245,247,.863);box-shadow:2px 2px 5px rgba(112,128,144,.493)}.dragable[data-v-10654808]{height:5px;background-color:transparent}.dragable[data-v-10654808]:hover{background-color:#b1b1bf}.nodrag[data-v-10654808]{height:calc(100% - 5px);overflow:hidden}.menu[data-v-10654808]{list-style:none;padding-left:0}.menu li[data-v-10654808]{float:left;line-height:30px;height:30px;margin:0 10px;padding:0 5px;text-align:center;text-decoration:none;cursor:pointer;border-radius:5px;font-family:Georgia,Times New Roman,Times,serif}.menu li[data-v-10654808]:hover{background-color:rgba(184,206,204,.486)}",""]),t["default"]=r},1886:function(e,t,o){"use strict";o.r(t);var a=o(8081),n=o.n(a),l=o(3645),i=o.n(l),r=i()(n());r.push([e.id,"div.timeout[data-v-3f3b2458]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:200px;height:200px;background-color:rgba(5,2,2,.73);background-clip:content-box;box-sizing:border-box;padding:6px 10px 14px 10px}",""]),t["default"]=r},7022:function(e,t,o){"use strict";o.r(t);var a=o(8081),n=o.n(a),l=o(3645),i=o.n(l),r=i()(n());r.push([e.id,".root[data-v-0c41b550]{width:100%;overflow-y:scroll}",""]),t["default"]=r},2013:function(e,t,o){"use strict";o.r(t);var a=o(8081),n=o.n(a),l=o(3645),i=o.n(l),r=i()(n());r.push([e.id,".chart[data-v-5abaf4e8],.workingslide[data-v-5abaf4e8]{width:100%;height:100%;outline:1px solid hsla(0,0%,47%,.322)}.right[data-v-5abaf4e8]{width:100%;height:100%;display:grid;grid-template-rows:50px 1fr}.header[data-v-5abaf4e8]{display:grid;grid-template-columns:1fr 120px;border-bottom:1px solid hsla(0,0%,47%,.322);padding:10px}[data-v-5abaf4e8]::-webkit-scrollbar{display:none}.gridlayout[data-v-5abaf4e8]{overflow-y:auto;width:100%;height:100%}.insideGridItem[data-v-5abaf4e8]{box-sizing:border-box;border:0 solid;border-radius:5px;background-color:#f7f8fa;outline:0 solid #777;box-shadow:-2px -2px 5px rgba(243,245,247,.863);box-shadow:2px 2px 5px rgba(112,128,144,.493)}.dragable[data-v-5abaf4e8]{height:5px;background-color:transparent}.dragable[data-v-5abaf4e8]:hover{background-color:#b1b1bf}.nodrag[data-v-5abaf4e8]{height:calc(100% - 5px);overflow:hidden}.menu[data-v-5abaf4e8]{list-style:none;padding-left:0}.menu li[data-v-5abaf4e8]{float:left;line-height:30px;height:30px;margin:0 10px;padding:0 5px;text-align:center;text-decoration:none;cursor:pointer;border-radius:5px;font-family:Georgia,Times New Roman,Times,serif}.menu li[data-v-5abaf4e8]:hover{background-color:rgba(184,206,204,.486)}",""]),t["default"]=r},1426:function(e,t,o){"use strict";o.r(t);var a=o(8081),n=o.n(a),l=o(3645),i=o.n(l),r=i()(n());r.push([e.id,".header[data-v-0768dd9e]{height:64px;box-sizing:border-box;border-bottom:1px solid hsla(0,0%,47%,.322);grid-template-columns:220px 1fr 120px}.header[data-v-0768dd9e],.logo[data-v-0768dd9e]{display:grid;align-items:center}.logo[data-v-0768dd9e]{grid-template-columns:100px 1fr;justify-items:center}.chart[data-v-0768dd9e],.right[data-v-0768dd9e]{width:100%;height:100%}.login[data-v-0768dd9e]{margin-right:15px}[data-v-0768dd9e]::-webkit-scrollbar{display:none}div.slidebar[data-v-0768dd9e]{display:grid;height:100%;grid-template-rows:1fr 20px}a[data-v-0768dd9e]{text-decoration:none;color:#acaeb0}",""]),t["default"]=r},2297:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return zt}});var a=o(311);const n=e=>((0,a.pushScopeId)("data-v-0768dd9e"),e=e(),(0,a.popScopeId)(),e),l={class:"header"},i=n((()=>(0,a.createElementVNode)("div",{class:"logo"},[(0,a.createElementVNode)("img",{style:{width:"30px",height:"30px","justify-self":"end","padding-right":"10px"},src:"logo.png"}),(0,a.createElementVNode)("strong",{style:{"justify-self":"start","font-size":"16px"}},"微思文稿")],-1))),r={class:"login"},d={key:0,href:"https://beian.miit.gov.cn",target:"_blank"},s={class:"right"};function c(e,t,o,n,c,u){const h=(0,a.resolveComponent)("n-menu"),p=(0,a.resolveComponent)("n-button"),m=(0,a.resolveComponent)("n-avatar"),f=(0,a.resolveComponent)("n-dropdown"),v=(0,a.resolveComponent)("login"),w=(0,a.resolveComponent)("user"),g=(0,a.resolveComponent)("n-layout-header"),x=(0,a.resolveComponent)("n-layout-sider"),k=(0,a.resolveComponent)("n-layout");return(0,a.openBlock)(),(0,a.createBlock)(k,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(g,null,{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",l,[i,(0,a.createVNode)(h,{value:n.navValue,"onUpdate:value":[t[0]||(t[0]=e=>n.navValue=e),u.changeNav],mode:"horizontal",options:n.navOptions},null,8,["value","options","onUpdate:value"]),(0,a.createElementVNode)("div",r,[e.loginState?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createBlock)(p,{key:0,type:"primary",size:"small",block:"",onClick:t[1]||(t[1]=e=>this.$refs.login.showLogin())},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)("登录")])),_:1})),e.loginState?((0,a.openBlock)(),(0,a.createBlock)(f,{key:1,trigger:"click",onSelect:u.handleSelect,options:c.options},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(m,{color:"skyblue",style:{cursor:"pointer"},bordered:!0,round:""},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(u.nickName),1)])),_:1})])),_:1},8,["onSelect","options"])):(0,a.createCommentVNode)("",!0)])]),(0,a.createVNode)(v,{ref:"login"},null,512),(0,a.createVNode)(w,{ref:"user"},null,512)])),_:1}),(0,a.createVNode)(k,{"has-sider":"","content-style":{height:e.innerSize.height-64+"px"}},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(x,{"collapsed-width":64,width:220,"show-trigger":"","content-style":"background-color:#f7f8fa",bordered:"","collapse-mode":"width",collapsed:n.collapsed,onCollapse:t[3]||(t[3]=e=>n.collapsed=!0),onExpand:t[4]||(t[4]=e=>n.collapsed=!1)},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",{class:"sidebar",style:(0,a.normalizeStyle)({height:e.innerSize.height-94+"px"})},[(0,a.createVNode)(h,{collapsed:n.collapsed,"collapsed-width":64,"collapsed-icon-size":20,options:n.menuOptions,value:n.currentChartmenu,"onUpdate:value":t[2]||(t[2]=e=>n.currentChartmenu=e)},null,8,["collapsed","options","value"])],4),n.collapsed?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createElementBlock)("a",d," 豫ICP备2022018163号-2"))])),_:1},8,["collapsed"]),(0,a.createVNode)(k,{"content-style":"padding: 0px;overflow-y: hidden"},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",s,[((0,a.openBlock)(),(0,a.createBlock)((0,a.resolveDynamicComponent)(n.currentChartmenu)))])])),_:1})])),_:1},8,["content-style"])])),_:1})}var u=o(7139),h=o(6156);const p=e=>((0,a.pushScopeId)("data-v-5abaf4e8"),e=e(),(0,a.popScopeId)(),e),m={class:"workingslide",style:{"overflow-y":"scroll"}},f=["onClick","onContextmenu"],v=p((()=>(0,a.createElementVNode)("div",{class:"dragable"},null,-1))),w={class:"nodrag"},g=p((()=>(0,a.createElementVNode)("i",{class:"iconfont icon-data"},null,-1))),x=p((()=>(0,a.createElementVNode)("i",{class:"iconfont icon-style"},null,-1))),k=p((()=>(0,a.createElementVNode)("i",{class:"iconfont iconfont icon-save"},null,-1)));function C(e,t,o,n,l,i){const r=(0,a.resolveComponent)("atom"),d=(0,a.resolveComponent)("grid-item"),s=(0,a.resolveComponent)("grid-layout"),c=(0,a.resolveComponent)("v-contextmenu-item"),u=(0,a.resolveComponent)("v-contextmenu-divider"),h=(0,a.resolveComponent)("v-contextmenu"),p=(0,a.resolveComponent)("edit-atom-content"),C=(0,a.resolveComponent)("sheet-data"),b=(0,a.resolveDirective)("contextmenu");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createElementVNode)("div",m,[(0,a.createVNode)(s,{class:"gridlayout",layout:e.getTemplateSlideContent,"col-num":18,"row-height":40,"is-draggable":!0,"is-resizable":!0,"vertical-compact":!0,preventCollision:!1,margin:[20,20],"use-css-transforms":!1},{default:(0,a.withCtx)((()=>[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.getTemplateSlideContent,(o=>((0,a.openBlock)(),(0,a.createBlock)(d,{class:"insideGridItem",x:o.x,y:o.y,w:o.w,h:o.h,i:o.i,key:o.i,static:o.static,dragAllowFrom:".dragable"},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",{class:"insideContent",style:{height:"100%"},onDblclick:t[0]||(t[0]=(...t)=>e.fixedAtom&&e.fixedAtom(...t)),onClick:e=>i.atomActive(o.i),onContextmenu:e=>i.atomActive(o.i)},[v,(0,a.withDirectives)(((0,a.openBlock)(),(0,a.createElementBlock)("div",w,[(0,a.createVNode)(r,{atomType:o.atomType,atomContent:o.atomContent},null,8,["atomType","atomContent"])])),[[b,void 0,"contextmenu-atom"]])],40,f)])),_:2},1032,["x","y","w","h","i","static"])))),128))])),_:1},8,["layout"])]),(0,a.createVNode)(h,{ref:"contextmenu-atom"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,{onClick:t[1]||(t[1]=e=>i.edit("sheetData"))},{default:(0,a.withCtx)((()=>[g,(0,a.createTextVNode)(" 数据")])),_:1}),(0,a.createVNode)(u),(0,a.createVNode)(c,{onClick:t[2]||(t[2]=e=>i.edit("atomContent"))},{default:(0,a.withCtx)((()=>[x,(0,a.createTextVNode)(" 样式")])),_:1}),(0,a.createVNode)(u),(0,a.createVNode)(c,{onClick:t[3]||(t[3]=e=>i.save())},{default:(0,a.withCtx)((()=>[k,(0,a.createTextVNode)(" 保存")])),_:1})])),_:1},512),l.refresh.atomContent?((0,a.openBlock)(),(0,a.createBlock)(p,{key:0,ref:"atomContent",initAtom:i.editingAtom},null,8,["initAtom"])):(0,a.createCommentVNode)("",!0),l.refresh.sheetData?((0,a.openBlock)(),(0,a.createBlock)(C,{key:1,ref:"sheetData",initAtom:i.editingAtom},null,8,["initAtom"])):(0,a.createCommentVNode)("",!0)],64)}var b=o(5474),y=o(6161),N=o(3860),V=o(9990),_={components:{Atom:b.Z,EditAtomContent:y.Z,SheetData:N.Z,GridLayout:V.M,GridItem:V.P},setup(){const e=(0,h.Z)();return(0,a.provide)("editMode",!0),(0,a.provide)("menuValue","template-layout"),{...e}},data(){return{refresh:{atomContent:!1,sheetData:!1}}},computed:{...(0,u.rn)(["gallery","store"]),...(0,u.Se)(["getTemplateSlideContent","getLocalSlideContent"]),editingAtom(){return this.getTemplateSlideContent[this.gallery.activeIndex]}},methods:{...(0,u.OI)(["changeGalleryActiveIndex","addLocalAtom","initLocalAtom","removeLocalAtom"]),edit(e){this.refresh[e]=!1,this.$nextTick((()=>{this.refresh[e]=!0}))},atomActive(e){var t=this.getTemplateSlideContent.map((e=>e.i)).indexOf(e);this.changeGalleryActiveIndex({activeIndex:t})},save(){var e=JSON.parse(JSON.stringify(this.editingAtom)),t={...e,i:String(Date.parse(Date())),y:e.y+1};this.addLocalAtom({atom:t}),this.success("已保存至我的图表"),this.saveIndexDB()},saveIndexDB(){const e=JSON.parse(JSON.stringify(this.getLocalSlideContent));this.store.set("slideContent",e,(e=>{e&&console.log("saveIndexDB failed",e)}))}}},B=(o(9260),o(89));const I=(0,B.Z)(_,[["render",C],["__scopeId","data-v-5abaf4e8"]]);var S=I;const E=e=>((0,a.pushScopeId)("data-v-10654808"),e=e(),(0,a.popScopeId)(),e),F={class:"workingslide",style:{"overflow-y":"scroll"}},A=["onClick","onContextmenu"],z=E((()=>(0,a.createElementVNode)("div",{class:"dragable"},null,-1))),M={class:"nodrag"},L=E((()=>(0,a.createElementVNode)("i",{class:"iconfont icon-data"},null,-1))),D=E((()=>(0,a.createElementVNode)("i",{class:"iconfont icon-style"},null,-1))),T=E((()=>(0,a.createElementVNode)("i",{class:"iconfont icon-copy"},null,-1))),O=E((()=>(0,a.createElementVNode)("i",{class:"iconfont icon-delete"},null,-1)));function U(e,t,o,n,l,i){const r=(0,a.resolveComponent)("atom"),d=(0,a.resolveComponent)("grid-item"),s=(0,a.resolveComponent)("grid-layout"),c=(0,a.resolveComponent)("v-contextmenu-item"),u=(0,a.resolveComponent)("v-contextmenu-divider"),h=(0,a.resolveComponent)("v-contextmenu"),p=(0,a.resolveComponent)("edit-atom-content"),m=(0,a.resolveComponent)("sheet-data"),f=(0,a.resolveDirective)("contextmenu");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[(0,a.createElementVNode)("div",F,[(0,a.createVNode)(s,{class:"gridlayout",layout:e.getLocalSlideContent,"col-num":18,"row-height":40,"is-draggable":!0,"is-resizable":!0,"vertical-compact":!0,preventCollision:!1,margin:[20,20],"use-css-transforms":!1},{default:(0,a.withCtx)((()=>[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(e.getLocalSlideContent,(o=>((0,a.openBlock)(),(0,a.createBlock)(d,{class:"insideGridItem",x:o.x,y:o.y,w:o.w,h:o.h,i:o.i,key:o.i,static:o.static,dragAllowFrom:".dragable"},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",{class:"insideContent",style:{height:"100%"},onDblclick:t[0]||(t[0]=(...t)=>e.fixedAtom&&e.fixedAtom(...t)),onClick:e=>i.atomActive(o.i),onContextmenu:e=>i.atomActive(o.i)},[z,(0,a.withDirectives)(((0,a.openBlock)(),(0,a.createElementBlock)("div",M,[(0,a.createVNode)(r,{atomType:o.atomType,atomContent:o.atomContent},null,8,["atomType","atomContent"])])),[[f,void 0,"contextmenu-atom"]])],40,A)])),_:2},1032,["x","y","w","h","i","static"])))),128))])),_:1},8,["layout"])]),(0,a.createVNode)(h,{ref:"contextmenu-atom"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,{onClick:t[1]||(t[1]=e=>i.edit("sheetData")),disabled:l.disabled.sheetData},{default:(0,a.withCtx)((()=>[L,(0,a.createTextVNode)(" 数据")])),_:1},8,["disabled"]),(0,a.createVNode)(u),(0,a.createVNode)(c,{onClick:t[2]||(t[2]=e=>i.edit("atomContent")),disabled:l.disabled.atomContent},{default:(0,a.withCtx)((()=>[D,(0,a.createTextVNode)(" 样式")])),_:1},8,["disabled"]),(0,a.createVNode)(u),(0,a.createVNode)(c,{onClick:t[3]||(t[3]=e=>i.copy())},{default:(0,a.withCtx)((()=>[T,(0,a.createTextVNode)(" 复制")])),_:1}),(0,a.createVNode)(u),(0,a.createVNode)(c,{onClick:t[4]||(t[4]=e=>i.remove())},{default:(0,a.withCtx)((()=>[O,(0,a.createTextVNode)(" 删除")])),_:1})])),_:1},512),l.refresh.atomContent?((0,a.openBlock)(),(0,a.createBlock)(p,{key:0,ref:"atomContent",initAtom:i.editingAtom},null,8,["initAtom"])):(0,a.createCommentVNode)("",!0),l.refresh.sheetData?((0,a.openBlock)(),(0,a.createBlock)(m,{key:1,ref:"sheetData",initAtom:i.editingAtom},null,8,["initAtom"])):(0,a.createCommentVNode)("",!0)],64)}var j={setup(){(0,a.provide)("editMode",!0),(0,a.provide)("menuValue","local-layout")},components:{Atom:b.Z,EditAtomContent:y.Z,SheetData:N.Z,GridLayout:V.M,GridItem:V.P},data(){return{refresh:{atomContent:!1,sheetData:!1},disabled:{sheetData:!0,atomContent:!0}}},computed:{...(0,u.rn)(["gallery","store"]),...(0,u.Se)(["getLocalSlideContent"]),editingAtom(){return this.getLocalSlideContent[this.gallery.activeIndex]},length(){return this.getLocalSlideContent.length}},methods:{...(0,u.OI)(["changeGalleryActiveIndex","addLocalAtom"]),edit(e){this.refresh[e]=!1,this.$nextTick((()=>{this.refresh[e]=!0}))},atomActive(e){var t=this.getLocalSlideContent.map((e=>e.i)).indexOf(e);this.changeGalleryActiveIndex({activeIndex:t})},copy(){var e=JSON.parse(JSON.stringify(this.editingAtom)),t={...e,i:String(Date.parse(Date())),y:e.y+1};this.addLocalAtom({atom:t}),window.dispatchEvent(new Event("resize")),this.saveIndexDB()},remove(){this.getLocalSlideContent.splice(this.gallery.activeIndex,1),window.dispatchEvent(new Event("resize")),this.saveIndexDB()},share(){},saveIndexDB(){const e=JSON.parse(JSON.stringify(this.getLocalSlideContent));this.store.set("slideContent",e,(e=>{e&&console.log("saveIndexDB failed",e)}))}},mounted(){window.dispatchEvent(new Event("resize"))},unmounted(){this.saveIndexDB()},watch:{editingAtom:{deep:!0,immediate:!0,handler(e){e&&(this.disabled.sheetData=!(["echart","tables"].indexOf(e.atomType)>-1),this.disabled.atomContent=["text-md","simple-table"].indexOf(e.atomContent.atomName)>-1)}}}};o(8178);const $=(0,B.Z)(j,[["render",U],["__scopeId","data-v-10654808"]]);var Z=$;const P=e=>((0,a.pushScopeId)("data-v-e341dc82"),e=e(),(0,a.popScopeId)(),e),R={style:{display:"flex","flex-direction":"row-reverse","padding-right":"10px"}},J=P((()=>(0,a.createElementVNode)("span",null,"创建新文件",-1))),G=P((()=>(0,a.createElementVNode)("span",null,"上传本地文件",-1))),H={key:1,class:"workingslide"},q=P((()=>(0,a.createElementVNode)("span",null,"创建新文件",-1))),Y=P((()=>(0,a.createElementVNode)("span",null,"上传本地文件",-1))),W=P((()=>(0,a.createElementVNode)("i",{class:"iconfont icon-edit"},null,-1))),Q=P((()=>(0,a.createElementVNode)("i",{class:"iconfont icon-play"},null,-1))),K=P((()=>(0,a.createElementVNode)("i",{class:"iconfont icon-view"},null,-1))),X=P((()=>(0,a.createElementVNode)("i",{class:"iconfont icon-doc"},null,-1))),ee=P((()=>(0,a.createElementVNode)("i",{class:"iconfont icon-copy"},null,-1))),te=P((()=>(0,a.createElementVNode)("i",{class:"iconfont icon-delete"},null,-1))),oe=P((()=>(0,a.createElementVNode)("i",{class:"iconfont icon-download"},null,-1))),ae=P((()=>(0,a.createElementVNode)("i",{class:"iconfont icon-upload"},null,-1))),ne=P((()=>(0,a.createElementVNode)("i",{class:"iconfont icon-upload"},null,-1)));function le(e,t,o,n,l,i){const r=(0,a.resolveComponent)("GridOutline"),d=(0,a.resolveComponent)("ListSharp"),s=(0,a.resolveComponent)("n-icon"),c=(0,a.resolveComponent)("n-button"),u=(0,a.resolveComponent)("n-empty"),h=(0,a.resolveComponent)("n-data-table"),p=(0,a.resolveComponent)("n-popover"),m=(0,a.resolveComponent)("n-button-group"),f=(0,a.resolveComponent)("n-space"),v=(0,a.resolveComponent)("n-card"),w=(0,a.resolveComponent)("n-input"),g=(0,a.resolveComponent)("CloudDoneOutline"),x=(0,a.resolveComponent)("v-slide"),k=(0,a.resolveComponent)("n-dynamic-tags"),C=(0,a.resolveComponent)("v-contextmenu-item"),b=(0,a.resolveComponent)("v-contextmenu-divider"),y=(0,a.resolveComponent)("v-contextmenu"),N=(0,a.resolveComponent)("n-switch"),V=(0,a.resolveComponent)("n-input-group"),_=(0,a.resolveComponent)("n-modal"),B=(0,a.resolveDirective)("contextmenu");return(0,a.openBlock)(),(0,a.createElementBlock)("div",{class:"root",style:(0,a.normalizeStyle)({height:e.innerSize.height-64+"px"})},[(0,a.createElementVNode)("div",R,[(0,a.createVNode)(c,{quaternary:"",circle:"",type:"primary",size:"small",onClick:t[0]||(t[0]=e=>this.listMode=!this.listMode)},{icon:(0,a.withCtx)((()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)((()=>[n.listMode?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createBlock)(r,{key:0})),n.listMode?((0,a.openBlock)(),(0,a.createBlock)(d,{key:1})):(0,a.createCommentVNode)("",!0)])),_:1})])),_:1})]),n.listMode?((0,a.openBlock)(),(0,a.createBlock)(v,{key:0,bordered:!1},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(f,{vertical:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(h,{bordered:!1,size:"small",columns:n.columns,data:n.fileList},{empty:(0,a.withCtx)((()=>[(0,a.createVNode)(u,{description:"无数据"})])),_:1},8,["columns","data"]),(0,a.createVNode)(m,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(p,{trigger:"hover"},{trigger:(0,a.withCtx)((()=>[(0,a.createVNode)(c,{round:"",onClick:t[1]||(t[1]=e=>i.newFile())},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)(" 新建 ")])),_:1})])),default:(0,a.withCtx)((()=>[J])),_:1}),(0,a.createVNode)(p,{trigger:"hover"},{trigger:(0,a.withCtx)((()=>[(0,a.createVNode)(c,{round:"",onClick:t[2]||(t[2]=e=>this.$refs.upload.click())},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)(" 上传 ")])),_:1})])),default:(0,a.withCtx)((()=>[G])),_:1})])),_:1})])),_:1})])),_:1})):(0,a.createCommentVNode)("",!0),(0,a.createElementVNode)("input",{ref:"upload",onChange:t[3]||(t[3]=e=>i.uploadFile()),style:{display:"none"},type:"file",accept:".json"},null,544),n.listMode?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createElementBlock)("div",H,[((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(n.fileList,((e,t)=>(0,a.withDirectives)(((0,a.openBlock)(),(0,a.createBlock)(v,{class:"layout",hoverable:"",key:t,"header-style":"padding:5px 10px","content-style":"padding:5px 10px","footer-style":"padding:5px 10px",onClick:e=>i.fileActive(t),onContextmenu:e=>i.fileActive(t)},{header:(0,a.withCtx)((()=>[(0,a.createVNode)(w,{autosize:"",size:"small",maxlength:"10",value:e.fileName,"onUpdate:value":t=>e.fileName=t,style:{border:"0px"}},null,8,["value","onUpdate:value"])])),"header-extra":(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(`${n.dayjs(e.date).format("YYYY-MM-DD HH:mm:ss ")}`)+" ",1),e.shared?((0,a.openBlock)(),(0,a.createBlock)(c,{key:0,text:"",style:{"padding-left":"10px"},onClick:e=>i.showShare(t)},{icon:(0,a.withCtx)((()=>[(0,a.createVNode)(s,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(g)])),_:1})])),_:2},1032,["onClick"])):(0,a.createCommentVNode)("",!0)])),footer:(0,a.withCtx)((()=>[(0,a.createVNode)(k,{value:e.tags,"onUpdate:value":t=>e.tags=t,max:5},null,8,["value","onUpdate:value"])])),default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",{class:"cover",style:(0,a.normalizeStyle)({background:e.getBackground})},[(0,a.createVNode)(x,{slideContent:JSON.parse(JSON.stringify(e.slides[0].slideContent)),height:720},null,8,["slideContent"])],4)])),_:2},1032,["onClick","onContextmenu"])),[[B,void 0,"contextmenu-atom"]]))),128)),(0,a.createVNode)(v,{class:"new",hoverable:""},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(p,{trigger:"hover"},{trigger:(0,a.withCtx)((()=>[(0,a.createVNode)(c,{round:"",onClick:t[4]||(t[4]=e=>i.newFile())},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)(" 新建 ")])),_:1})])),default:(0,a.withCtx)((()=>[q])),_:1}),(0,a.createVNode)(p,{trigger:"hover"},{trigger:(0,a.withCtx)((()=>[(0,a.createVNode)(c,{round:"",onClick:t[5]||(t[5]=e=>this.$refs.upload.click())},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)(" 上传 ")])),_:1})])),default:(0,a.withCtx)((()=>[Y])),_:1})])),_:1})])),_:1}),(0,a.createVNode)(v,{class:"hide"}),(0,a.createVNode)(v,{class:"hide"})])),(0,a.createVNode)(y,{ref:"contextmenu-atom"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(C,{onClick:t[6]||(t[6]=e=>n.push("edit"))},{default:(0,a.withCtx)((()=>[W,(0,a.createTextVNode)(" 编辑")])),_:1}),(0,a.createVNode)(b),(0,a.createVNode)(C,{onClick:t[7]||(t[7]=e=>n.push("play"))},{default:(0,a.withCtx)((()=>[Q,(0,a.createTextVNode)(" 放映")])),_:1}),(0,a.createVNode)(b),(0,a.createVNode)(C,{onClick:t[8]||(t[8]=e=>n.push("view"))},{default:(0,a.withCtx)((()=>[K,(0,a.createTextVNode)(" 浏览")])),_:1}),(0,a.createVNode)(b),(0,a.createVNode)(C,{onClick:t[9]||(t[9]=e=>n.push("doc"))},{default:(0,a.withCtx)((()=>[X,(0,a.createTextVNode)(" 文稿")])),_:1}),(0,a.createVNode)(b),(0,a.createVNode)(C,{onClick:t[10]||(t[10]=e=>i.copyFile())},{default:(0,a.withCtx)((()=>[ee,(0,a.createTextVNode)(" 复制")])),_:1}),(0,a.createVNode)(b),(0,a.createVNode)(C,{onClick:t[11]||(t[11]=e=>i.deleteFile())},{default:(0,a.withCtx)((()=>[te,(0,a.createTextVNode)(" 删除 ")])),_:1}),(0,a.createVNode)(b),(0,a.createVNode)(C,{onClick:t[12]||(t[12]=e=>n.downloadFile(this.document.activeIndex))},{default:(0,a.withCtx)((()=>[oe,(0,a.createTextVNode)(" 下载 ")])),_:1}),(0,a.createVNode)(b),this.activeFile.shared?((0,a.openBlock)(),(0,a.createBlock)(C,{key:0,onClick:t[13]||(t[13]=e=>i.updateFile())},{default:(0,a.withCtx)((()=>[ae,(0,a.createTextVNode)(" 更新 ")])),_:1})):(0,a.createCommentVNode)("",!0),this.activeFile.shared?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createBlock)(C,{key:1,onClick:t[14]||(t[14]=e=>i.pushFile())},{default:(0,a.withCtx)((()=>[ne,(0,a.createTextVNode)(" 分享 ")])),_:1}))])),_:1},512),(0,a.createVNode)(_,{show:n.showModalCloud,"onUpdate:show":t[17]||(t[17]=e=>n.showModalCloud=e)},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(v,{style:{width:"500px","border-radius":"5px"},role:"dialog","aria-modal":"true","content-style":"padding:0px 20px 24px 24px",bordered:!1,title:"公开分享"},{"header-extra":(0,a.withCtx)((()=>[(0,a.createVNode)(N,{value:n.sharedRef,"onUpdate:value":t[15]||(t[15]=e=>n.sharedRef=e)},null,8,["value"])])),default:(0,a.withCtx)((()=>[(0,a.createVNode)(f,{vertical:""},{default:(0,a.withCtx)((()=>[this.activeFile.shared?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:0},[(0,a.createTextVNode)(" 开启后，所有获得链接的人皆可访问。分享内容需符合国家法律法规。 ")],64)),this.activeFile.shared?((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:1},[(0,a.createTextVNode)(" 已公开，所有获得链接的人皆可访问。分享内容需符合国家法律法规。 "),(0,a.createVNode)(V,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(w,{style:{width:"500px"},disabled:"",value:i.activeFileLink},null,8,["value"]),(0,a.createVNode)(c,{type:"primary",onClick:t[16]||(t[16]=e=>n.copyLink(i.activeFileLink))},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)(" 复制链接 ")])),_:1})])),_:1})],64)):(0,a.createCommentVNode)("",!0)])),_:1})])),_:1})])),_:1},8,["show"])],4)}var ie=o(678),re=o(3972),de=o(691),se=o(6154),ce=o(5943);const ue={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},he=(0,a.createElementVNode)("rect",{x:"48",y:"48",width:"176",height:"176",rx:"20",ry:"20",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),pe=(0,a.createElementVNode)("rect",{x:"288",y:"48",width:"176",height:"176",rx:"20",ry:"20",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),me=(0,a.createElementVNode)("rect",{x:"48",y:"288",width:"176",height:"176",rx:"20",ry:"20",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),fe=(0,a.createElementVNode)("rect",{x:"288",y:"288",width:"176",height:"176",rx:"20",ry:"20",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),ve=[he,pe,me,fe];var we=(0,a.defineComponent)({name:"GridOutline",render:function(e,t){return(0,a.openBlock)(),(0,a.createElementBlock)("svg",ue,ve)}});const ge={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},xe=(0,a.createStaticVNode)('<path fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="48" d="M144 144h320"></path><path fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="48" d="M144 256h320"></path><path fill="none" stroke="currentColor" stroke-linejoin="round" stroke-width="48" d="M144 368h320"></path><path fill="none" stroke="currentColor" stroke-linecap="square" stroke-linejoin="round" stroke-width="32" d="M64 128h32v32H64z"></path><path fill="none" stroke="currentColor" stroke-linecap="square" stroke-linejoin="round" stroke-width="32" d="M64 240h32v32H64z"></path><path fill="none" stroke="currentColor" stroke-linecap="square" stroke-linejoin="round" stroke-width="32" d="M64 352h32v32H64z"></path>',6),ke=[xe];var Ce=(0,a.defineComponent)({name:"ListSharp",render:function(e,t){return(0,a.openBlock)(),(0,a.createElementBlock)("svg",ge,ke)}});const be={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ye=(0,a.createElementVNode)("path",{d:"M400 240c-8.89-89.54-71-144-144-144c-69 0-113.44 48.2-128 96c-60 6-112 43.59-112 112c0 66 54 112 120 112h260c55 0 100-27.44 100-88c0-59.82-53-85.76-96-88z",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1),Ne=(0,a.createElementVNode)("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M317 208L209.2 336L163 284.8"},null,-1),Ve=[ye,Ne];var _e=(0,a.defineComponent)({name:"CloudDoneOutline",render:function(e,t){return(0,a.openBlock)(),(0,a.createElementBlock)("svg",be,Ve)}});const Be={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Ie=(0,a.createElementVNode)("circle",{cx:"256",cy:"256",r:"48",fill:"currentColor"},null,-1),Se=(0,a.createElementVNode)("circle",{cx:"416",cy:"256",r:"48",fill:"currentColor"},null,-1),Ee=(0,a.createElementVNode)("circle",{cx:"96",cy:"256",r:"48",fill:"currentColor"},null,-1),Fe=[Ie,Se,Ee];var Ae=(0,a.defineComponent)({name:"EllipsisHorizontalSharp",render:function(e,t){return(0,a.openBlock)(),(0,a.createElementBlock)("svg",Be,Fe)}}),ze=o(1945),Me=o.n(ze),Le={components:{GridOutline:we,ListSharp:Ce,CloudDoneOutline:_e},name:"all-slides",setup(){const e=(0,h.Z)(),t=(0,u.oR)(),o=(0,a.computed)((()=>t.state.document.fileList)),n=[{label:"编辑",value:"edit"},{label:"放映",value:"play"},{label:"浏览",value:"view"},{label:"文稿",value:"doc"},{label:"复制",value:"copy"},{label:"删除",value:"remove"},{label:"下载",value:"download"}],l=()=>[{title:"文件名",key:"fileName",render(e,t){return(0,a.h)(ce.NInput,{maxlength:10,autosize:!1,placeholder:"文件名",value:e.fileName,onUpdateValue(t){const n=(0,a.toRaw)(o.value).map((e=>e.id)),l=n.indexOf(e.id);o.value[l].fileName=t}})}},{title:"创建时间",key:"date",render(e){return(0,re.Z)(e.date).format("YYYY-MM-DD HH:mm:ss")},sorter:(e,t)=>e.date-t.date},{title:"标签",key:"tags",render(e,t){const n=(0,a.h)(ce.NDynamicTags,{style:{marginRight:"6px"},bordered:!1,max:5,value:e.tags,onUpdateValue(t){const n=(0,a.toRaw)(o.value).map((e=>e.id)),l=n.indexOf(e.id);o.value[l].tags=t}});return n}},{title:"分享中",key:"shared",render(e){return e.shared?(0,a.h)(ce.NIcon,{size:20,color:"#FD803FF0"},(0,a.h)(_e)):""}},{title:"操作",key:"fileType",render(t,l){return(0,a.h)(ce.NPopselect,{options:n,onUpdateValue(n){const l=(0,a.toRaw)(o.value).map((e=>e.id)),i=l.indexOf(t.id),r=i;switch(p({activeIndex:i}),n){case"edit":case"play":case"view":case"doc":w(n);break;case"copy":const o=d(r);s({file:o});break;case"remove":!0===t.shared?e.info("文稿公开分享中,请取消分享后再删除"):(c({index:r}),m({_id:t.id}));break;case"download":f(r);break}}},(0,a.h)(ce.NButton,{text:!0,style:{fontSize:"24px"},size:"small"},(0,a.h)(ce.NIcon,(0,a.h)(Ae))))}}],i=t=>{Me()(t),Me()(t),e.success("复制成功")},r=l(),d=e=>{const t=(0,a.toRaw)(o.value)[e];return{...t,id:(0,de.x0)(),date:Date.parse(new Date),shared:!1}},s=e=>t.commit("addFile",e),c=e=>t.commit("removeFile",e),p=e=>{t.commit("changeDocumentActiveIndex",e)},m=e=>t.commit("removeSharedFileList",e),f=e=>{const t=(0,a.toRaw)(o.value)[e];var n=JSON.stringify(t,null,"\t");let l=new Blob([n],{type:"text/plain;charset=utf-8"});(0,se.saveAs)(l,t.fileName+".json")},v=(0,ie.tv)(),w=((0,ie.yj)(),e=>{v.push({name:e})});return{...e,dayjs:re.Z,columns:r,changeDocumentActiveIndex:p,fileList:o,getFile:d,addFile:s,removeFile:c,downloadFile:f,copyLink:i,push:w,listMode:(0,a.ref)(!1),key:(0,a.ref)(1),showModalCloud:(0,a.ref)(!1),sharedRef:(0,a.ref)(!0),basePath:"cloud://cloud1-6gje6dbjbdbca85f.636c-cloud1-6gje6dbjbdbca85f-1312763637/vslide-file/"}},computed:{...(0,u.rn)(["document","store","layout","template","innerSize"]),...(0,u.Se)(["activeFile","user"]),activeFileLink(){return`https://vslide.cn/slides?showPage=false&id=${this.activeFile.id}`}},methods:{...(0,u.OI)(["changeAccount","addSharedFileList","removeSharedFileList"]),fileActive(e){const t=e;this.changeDocumentActiveIndex({activeIndex:t})},newFile(){var e=JSON.parse(JSON.stringify(this.template.vslides));e.slides[0].slideContent=[],e.slides=[e.slides[0]];var t={...e,id:(0,de.x0)(),date:Date.parse(new Date),shared:!1};this.addFile({file:t}),this.saveIndexDb()},copyFile(){var e=this.getFile(this.document.activeIndex);this.addFile({file:e}),this.saveIndexDb()},deleteFile(){const e=this.activeFile.shared;if(e)return void this.info("文稿公开分享中,请取消分享后再删除");const t=this.document.activeIndex;this.removeFile({index:t}),this.saveIndexDb()},uploadFile(){const e=this.$refs.upload.files[0],t=new FileReader;t.addEventListener("load",(()=>{var e=JSON.parse(t.result);if(console.log("上传了",e),"vslideFile"===e.fileType){let t={...e,id:(0,de.x0)(),date:Date.parse(new Date),shared:!1};this.addFile({file:t}),this.success("上传成功"),this.saveIndexDb()}else this.error("格式错误,请打开vslide文件")}),!1),e&&t.readAsText(e)},saveIndexDb(){const e=JSON.parse(JSON.stringify(this.fileList));this.store.set("fileList",e,(e=>{if(e)throw this.error("保存到IndexDB出错"),e}))},showShare(e){const t=e;this.changeDocumentActiveIndex({activeIndex:t}),this.showModalCloud=!0,this.sharedRef=this.activeFile.shared},err(e,t){this.error(e)},async pushFile(){const e=this.activeFile,t=e.id,o=`vslide-file/${t}.json`,a=`getFile(${JSON.stringify(e)})`,n=new Blob([a],{type:"text/plain;charset=utf-8"}),l=Number((n.size/1048576).toFixed(2)),i=this.$cloudbase,r=i.database(),d=this.user.uid;try{const a=await i.callFunction({name:"fn-allow-push",data:{uid:d,fileSize:l}}),{allow_file:s,allow_size:c}=a.result;if(!1===s)return void this.warning("可用文稿个数不足");if(!1===c)return void this.warning("存储空间容量不足");await i.uploadFile({cloudPath:o,filePath:n});const u=(0,re.Z)(),h={fileName:e.fileName,author:e.author,tags:e.tags,fileSize:l,date_update:u.format("YYYY-MM-DD HH:mm:ss"),_date_update:Date.parse(u.toDate())};await r.collection("vslide-file-db").doc(t).set(h),this.success("分享成功"),this.activeFile.shared=!0,this.changeAccount({file:1,size:l}),this.addSharedFileList({fileInfo:{_id:t,...h}})}catch(s){this.err("分享失败",s)}},async unpushFile(){const e=this.activeFile,t=this.activeFile.id,o=this.basePath+t+".json",a=JSON.stringify(e),n=new Blob([a],{type:"text/plain;charset=utf-8"}),l=Number((n.size/1048576).toFixed(2)),i=this.$cloudbase,r=i.database();try{await i.deleteFile({fileList:[o]}),await r.collection("vslide-file-db").doc(t).remove(),this.success("已取消分享"),this.activeFile.shared=!1,this.changeAccount({file:-1,size:-l}),this.removeSharedFileList({_id:t})}catch(d){this.err("取消分享失败",d)}},async updateFile(){try{await this.unpushFile(),await this.pushFile()}catch(e){this.err("更新失败",e)}}},unmounted(){this.saveIndexDb()},watch:{sharedRef(e){!0===e?this.pushFile():this.unpushFile()}}};o(6455);const De=(0,B.Z)(Le,[["render",le],["__scopeId","data-v-e341dc82"]]);var Te=De;const Oe={class:"root"};function Ue(e,t,o,n,l,i){const r=(0,a.resolveComponent)("n-empty"),d=(0,a.resolveComponent)("n-data-table"),s=(0,a.resolveComponent)("n-card");return(0,a.openBlock)(),(0,a.createElementBlock)("div",Oe,[(0,a.createVNode)(s,{bordered:!1},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(d,{bordered:!1,size:"small",columns:n.columns,data:n.sharedFileList},{empty:(0,a.withCtx)((()=>[(0,a.createVNode)(r,{description:"暂无正在分享的文稿"})])),_:1},8,["columns","data"])])),_:1})])}var je={name:"all-slides",setup(){const e=(0,h.Z)(),t=(0,u.oR)(),o=(0,a.computed)((()=>t.state.sharedFileList));var n=(0,a.reactive)({_id:"",fileSize:""});const l=(e,t)=>{n._id=e,n.fileSize=t},i=t=>{Me()(t),Me()(t),e.success("复制成功")},r=[{title:"文件名",key:"fileName"},{title:"分享日期",key:"date_update"},{title:"文件大小",key:"fileSize",render(e){return e.fileSize+"M"}},{title:"标签",key:"tags",render(e){const t=e.tags.map((e=>(0,a.h)(ce.NTag,{style:{marginRight:"6px"},bordered:!1},{default:()=>e})));return t}},{title:"复制链接",key:"_id",render(e,t){return(0,a.h)(ce.NButton,{strong:!0,type:"primary",size:"small",onClick:()=>i(`https://vslide.cn/slides?showPage=false&id=${e._id}`)},{default:()=>"复制链接"})}},{title:"取消分享",key:"_id",render(e,t){return(0,a.h)(ce.NButton,{strong:!0,tertiary:!0,size:"small",onClick:()=>l(e._id,e.fileSize,t)},{default:()=>"取消分享"})}}];return{...e,dayjs:re.Z,sharedFileList:o,columns:r,info:n,basePath:"cloud://cloud1-6gje6dbjbdbca85f.636c-cloud1-6gje6dbjbdbca85f-1312763637/vslide-file/"}},methods:{...(0,u.OI)(["changeAccount","removeSharedFileList"]),err(e,t){this.error(e)},async unpushFile(e,t){const o=e,a=this.basePath+o+".json",n=this.$cloudbase,l=n.database();try{await n.deleteFile({fileList:[a]}),await l.collection("vslide-file-db").doc(o).remove(),this.success("已取消分享"),this.changeAccount({file:-1,size:-t}),this.removeSharedFileList({_id:e})}catch(i){this.err("取消分享失败",i)}}},watch:{info:{deep:!0,handler(e){const{_id:t,fileSize:o}=e;t&&this.unpushFile(t,o)}}}};o(8548);const $e=(0,B.Z)(je,[["render",Ue],["__scopeId","data-v-0c41b550"]]);var Ze=$e;const Pe=e=>((0,a.pushScopeId)("data-v-3f3b2458"),e=e(),(0,a.popScopeId)(),e),Re={align:"center"},Je=Pe((()=>(0,a.createElementVNode)("p",{style:{color:"rgb(230,132,57)"}},"微信扫码 关注登录 ",-1))),Ge={style:{position:"relative"}},He=["src"],qe={key:0,class:"timeout"};function Ye(e,t,o,n,l,i){const r=(0,a.resolveComponent)("n-button"),d=(0,a.resolveComponent)("n-tab-pane"),s=(0,a.resolveComponent)("n-input"),c=(0,a.resolveComponent)("n-form-item-row"),u=(0,a.resolveComponent)("n-form"),h=(0,a.resolveComponent)("n-tabs"),p=(0,a.resolveComponent)("n-card"),m=(0,a.resolveComponent)("n-modal");return(0,a.openBlock)(),(0,a.createBlock)(m,{show:n.showModal,"onUpdate:show":t[4]||(t[4]=e=>n.showModal=e)},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(p,{style:{width:"500px","border-radius":"15px"},role:"dialog","aria-modal":"true","content-style":"padding:40px 40px",bordered:!1},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(h,{"default-value":"qrcode",size:"large","justify-content":"space-evenly"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(d,{name:"qrcode",tab:"扫码登录",style:{height:"300px"}},{default:(0,a.withCtx)((()=>[(0,a.createElementVNode)("div",Re,[Je,(0,a.createElementVNode)("div",Ge,[(0,a.createElementVNode)("img",{src:n.info.src,style:{width:"200px",height:"200px"}},null,8,He),n.info.isTimeout?((0,a.openBlock)(),(0,a.createElementBlock)("div",qe)):(0,a.createCommentVNode)("",!0),n.info.isTimeout?((0,a.openBlock)(),(0,a.createBlock)(r,{key:1,text:"",onClick:t[0]||(t[0]=e=>i.getQrcode()),style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%,-50%)",color:"rgb(230,132,57)","font-weight":"bold"}},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)(" 点击刷新 ")])),_:1})):(0,a.createCommentVNode)("",!0)])])])),_:1}),(0,a.createVNode)(d,{name:"email",tab:"邮箱登录",style:{height:"300px"}},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(u,{model:n.formSignin,rules:n.rulesSignin,ref:"refSignin"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(c,{label:"邮箱",path:"email"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(s,{value:n.formSignin.email,"onUpdate:value":t[1]||(t[1]=e=>n.formSignin.email=e),placeholder:"请输入邮箱,新用户请使用扫码登录"},null,8,["value"])])),_:1}),(0,a.createVNode)(c,{label:"密码",path:"pwd"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(s,{value:n.formSignin.pwd,"onUpdate:value":t[2]||(t[2]=e=>n.formSignin.pwd=e),type:"password","show-password-on":"mousedown",placeholder:"请输入密码",minlength:8,maxlength:32},null,8,["value"])])),_:1})])),_:1},8,["model","rules"]),(0,a.createVNode)(r,{type:"primary",block:"",strong:"",disabled:n.buttonSignin,onClick:t[3]||(t[3]=e=>i.signinWithEmail())},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)(" 登录 ")])),_:1},8,["disabled"])])),_:1})])),_:1})])),_:1})])),_:1},8,["show"])}o(1703);var We={setup(){const e=(0,a.reactive)({_id:"",src:"",ticket:"",isTimeout:!1}),t=(0,a.ref)(!1),o=(0,a.ref)(null),n=(0,h.Z)(),l=(0,a.reactive)({email:"",pwd:""}),i=(0,a.ref)(!0);(0,a.watch)(l,(e=>{let t=new RegExp(/^\w+@[a-zA-Z0-9\.]{2,10}(?:\.[a-z]{2,4}){1,3}$/);var o=new RegExp(/^(?![^a-zA-Z]+$)(?!\D+$)/);t.test(e.email)&&o.test(e.pwd)&&e.pwd.length>=8&&e.pwd.length<=32?i.value=!1:i.value=!0}));const r={email:[{required:!0,validator(e,t){let o=/^\w+@[a-zA-Z0-9\.]{2,10}(?:\.[a-z]{2,4}){1,3}$/;return t?!!o.test(t)||new Error("邮箱格式错误"):new Error("请输入邮箱")},trigger:"blur"}],pwd:[{required:!0,validator(e,t){var o=new RegExp(/^(?![^a-zA-Z]+$)(?!\D+$)/);return t?t.length<8||t.length>32?new Error("密码长度不小于 8 位，不大于 32 位"):!!o.test(t)||new Error("密码必须包含字母和数字"):new Error("请输入密码")},trigger:"blur"}]};return{showModal:t,...n,info:e,formSignin:l,rulesSignin:r,refSignin:o,buttonSignin:i,api:"https://wxrun-gzh-2150995-1312763637.ap-shanghai.run.tcloudbase.com/api/qrcode",timer:null}},methods:{...(0,u.OI)(["changeLoginState","initAccount","initSharedFileList"]),err(e,t){this.error(e)},async getQrcode(){try{const e=await this.axios.post(this.api),{_id:t,src:o}=e.data;this.info={_id:t,src:o,ticket:"",isTimeout:!1},this.startTimer()}catch(e){}},startTimer(){this.timer=setInterval((async()=>{try{const e={_id:this.info._id},t=await this.axios.post(this.api+"/login",e,{headers:{"Content-Type":"application/json"}}),{scaned:o,ticket:a}=t.data;null===o?this.info.isTimeout=!0:o&&a&&(this.info.ticket=a,this.signinCustom())}catch(e){}}),2e3)},stopTimer(){clearInterval(this.timer)},async showLogin(){await this.getQrcode(),this.showModal=!0},async signinCustom(){try{await this.$cloudbase.auth({persistence:"local"}).customAuthProvider().signIn(this.info.ticket),this.afterLogin()}catch(e){this.err("登录失败,请重试",e)}},async signinWithEmail(){try{await this.$cloudbase.auth({persistence:"local"}).signInWithEmailAndPassword(this.formSignin.email,this.formSignin.pwd),this.afterLogin()}catch(e){this.err("登录失败,请重试",e)}},async afterLogin(){const e=this.$cloudbase.auth().hasLoginState();this.changeLoginState({loginState:e}),this.success("登录成功"),this.stopTimer(),this.showModal=!1;const{uid:t,customUserId:o}=this.$cloudbase.auth().currentUser,a=await this.$cloudbase.callFunction({name:"fn-check-account",data:{openid:o,uid:t}}),n=a.result;this.initAccount({account:n});const l=await this.$cloudbase.database().collection("vslide-file-db").get(),i=l.data;console.log("sharedFileList",i),this.initSharedFileList({sharedFileList:i})}},watch:{showModal(e){!1===e&&this.stopTimer()}}};o(3387);const Qe=(0,B.Z)(We,[["render",Ye],["__scopeId","data-v-3f3b2458"]]);var Ke=Qe;function Xe(e,t,o,n,l,i){const r=(0,a.resolveComponent)("n-menu"),d=(0,a.resolveComponent)("n-layout-sider"),s=(0,a.resolveComponent)("n-button"),c=(0,a.resolveComponent)("n-space"),u=(0,a.resolveComponent)("n-input"),h=(0,a.resolveComponent)("n-form-item-row"),p=(0,a.resolveComponent)("n-select"),m=(0,a.resolveComponent)("n-form"),f=(0,a.resolveComponent)("n-card"),v=(0,a.resolveComponent)("n-input-group-label"),w=(0,a.resolveComponent)("n-date-picker"),g=(0,a.resolveComponent)("n-input-group"),x=(0,a.resolveComponent)("n-progress"),k=(0,a.resolveComponent)("n-layout"),C=(0,a.resolveComponent)("n-modal");return(0,a.openBlock)(),(0,a.createBlock)(C,{show:n.showModal,"onUpdate:show":t[18]||(t[18]=e=>n.showModal=e),"on-after-enter":this.fetchUserInfo()},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(f,{style:{width:"800px",height:"500px","border-radius":"10px"},role:"dialog","aria-modal":"true","content-style":"padding:0px",bordered:!1},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(k,{"has-sider":"",style:{height:"100%","border-radius":"10px"}},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(d,{width:"30%","content-style":"padding:20px;background-color:#f7f8fa;height:100%;"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(r,{value:n.activeMenu,"onUpdate:value":t[0]||(t[0]=e=>n.activeMenu=e),options:n.menuOptions},null,8,["value","options"])])),_:1}),(0,a.createVNode)(k,{style:{padding:"20px"}},{default:(0,a.withCtx)((()=>["profile"===n.activeMenu?((0,a.openBlock)(),(0,a.createBlock)(f,{key:0,title:"基本信息",bordered:!1},{"header-extra":(0,a.withCtx)((()=>[(0,a.createVNode)(c,null,{default:(0,a.withCtx)((()=>[n.userInfo.disabled.editUserInfo?((0,a.openBlock)(),(0,a.createBlock)(s,{key:0,text:"",onClick:t[1]||(t[1]=e=>this.userInfo.disabled.editUserInfo=!1)},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)("编辑")])),_:1})):(0,a.createCommentVNode)("",!0),n.userInfo.disabled.editUserInfo?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createBlock)(s,{key:1,text:"",onClick:t[2]||(t[2]=e=>this.userInfo.disabled.editUserInfo=!0)},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)("取消")])),_:1}))])),_:1})])),default:(0,a.withCtx)((()=>[(0,a.createVNode)(m,{model:n.userInfo,disabled:n.userInfo.disabled.editUserInfo,"label-placement":"top"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(h,{label:"ID"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(u,{value:n.userInfo.uid,"onUpdate:value":t[3]||(t[3]=e=>n.userInfo.uid=e),disabled:""},null,8,["value"])])),_:1}),(0,a.createVNode)(h,{label:"昵称",path:"nickName"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(u,{value:n.userInfo.nickName,"onUpdate:value":t[4]||(t[4]=e=>n.userInfo.nickName=e),placeholder:"",maxlength:"10","show-count":"",clearable:""},null,8,["value"])])),_:1}),(0,a.createVNode)(h,{label:"性别",path:"gender"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(p,{value:n.userInfo.gender,"onUpdate:value":t[5]||(t[5]=e=>n.userInfo.gender=e),options:n.genderOptions},null,8,["value","options"])])),_:1})])),_:1},8,["model","disabled"]),n.userInfo.disabled.editUserInfo?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createBlock)(s,{key:0,type:"primary",block:"",onClick:t[6]||(t[6]=e=>this.updateUserInfo())},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)("保存")])),_:1}))])),_:1})):(0,a.createCommentVNode)("",!0),"email"===n.activeMenu?((0,a.openBlock)(),(0,a.createBlock)(f,{key:1,title:"绑定邮箱",bordered:!1},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(m,{model:n.userInfo,rules:n.rules},{default:(0,a.withCtx)((()=>[this.user.email?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:0},[(0,a.createVNode)(h,{label:"邮箱",path:"email"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(u,{value:n.userInfo.email,"onUpdate:value":t[7]||(t[7]=e=>n.userInfo.email=e),placeholder:"请输入未绑定任何账号的邮箱"},null,8,["value"])])),_:1}),(0,a.createVNode)(s,{type:"primary",block:"",strong:"",disabled:n.userInfo.disabled.updateEmail,onClick:t[8]||(t[8]=e=>this.updateEmail())},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)("绑定邮箱")])),_:1},8,["disabled"])],64)),this.user.email?((0,a.openBlock)(),(0,a.createBlock)(h,{key:1,label:"邮箱",path:"email"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(u,{value:n.userInfo.email,"onUpdate:value":t[9]||(t[9]=e=>n.userInfo.email=e),disabled:""},null,8,["value"])])),_:1})):(0,a.createCommentVNode)("",!0)])),_:1},8,["model","rules"])])),_:1})):(0,a.createCommentVNode)("",!0),"password"===n.activeMenu?((0,a.openBlock)(),(0,a.createBlock)(f,{key:2,title:"修改密码",bordered:!1},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(m,{model:n.userInfo,rules:n.rules},{default:(0,a.withCtx)((()=>[this.user.hasPassword?(0,a.createCommentVNode)("",!0):((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:0},[(0,a.createVNode)(h,{label:"密码",path:"pwd"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(u,{value:n.userInfo.pwd,"onUpdate:value":t[10]||(t[10]=e=>n.userInfo.pwd=e),type:"password","show-password-on":"mousedown",placeholder:"密码不小于 8 位,同时包含数字和字母",minlength:8,maxlength:32},null,8,["value"])])),_:1}),(0,a.createVNode)(h,{label:"确认密码",path:"rpwd"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(u,{value:n.userInfo.rpwd,"onUpdate:value":t[11]||(t[11]=e=>n.userInfo.rpwd=e),disabled:!n.userInfo.pwd,type:"password","show-password-on":"mousedown",placeholder:"密码不小于 8 位,同时包含数字和字母",minlength:8,maxlength:32},null,8,["value","disabled"])])),_:1}),(0,a.createVNode)(s,{type:"primary",block:"",strong:"",disabled:n.userInfo.disabled.updatePwd,onClick:t[12]||(t[12]=e=>this.updatePwd())},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)("设置密码")])),_:1},8,["disabled"])],64)),this.user.hasPassword?((0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,{key:1},[(0,a.createVNode)(h,{label:"当前密码",path:"pwd"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(u,{value:n.userInfo.oldpwd,"onUpdate:value":t[13]||(t[13]=e=>n.userInfo.oldpwd=e),type:"password","show-password-on":"mousedown",placeholder:"请输入当前密码",minlength:8,maxlength:32},null,8,["value"])])),_:1}),(0,a.createVNode)(h,{label:"新密码",path:"pwd"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(u,{value:n.userInfo.pwd,"onUpdate:value":t[14]||(t[14]=e=>n.userInfo.pwd=e),type:"password","show-password-on":"mousedown",placeholder:"密码不小于 8 位,同时包含数字和字母",minlength:8,maxlength:32},null,8,["value"])])),_:1}),(0,a.createVNode)(h,{label:"确认密码",path:"rpwd"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(u,{value:n.userInfo.rpwd,"onUpdate:value":t[15]||(t[15]=e=>n.userInfo.rpwd=e),disabled:!n.userInfo.pwd,type:"password","show-password-on":"mousedown",placeholder:"密码不小于 8 位,同时包含数字和字母",minlength:8,maxlength:32},null,8,["value","disabled"])])),_:1}),(0,a.createVNode)(s,{type:"primary",block:"",strong:"",disabled:n.userInfo.disabled.updatePwd,onClick:t[16]||(t[16]=e=>this.updatePwd(this.userInfo.oldpwd))},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)("修改密码")])),_:1},8,["disabled"])],64)):(0,a.createCommentVNode)("",!0)])),_:1},8,["model","rules"])])),_:1})):(0,a.createCommentVNode)("",!0),"account"===n.activeMenu?((0,a.openBlock)(),(0,a.createBlock)(f,{key:3,title:"存储空间",bordered:!1},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(m,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(h,{label:"用户类型"},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(g,null,{default:(0,a.withCtx)((()=>[(0,a.createVNode)(u,{style:{width:"40%"},value:i.role,disabled:""},null,8,["value"]),"vip_1"===e.account.role?((0,a.openBlock)(),(0,a.createBlock)(v,{key:0,style:{width:"20%"}},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)("到期时间")])),_:1})):(0,a.createCommentVNode)("",!0),"vip_1"===e.account.role?((0,a.openBlock)(),(0,a.createBlock)(w,{key:1,style:{width:"40%"},type:"datetime",value:i.date_expire,disabled:""},null,8,["value"])):(0,a.createCommentVNode)("",!0)])),_:1})])),_:1}),(0,a.createVNode)(h,{label:i.text.file},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(x,{type:"line",percentage:i.percentage.file,"indicator-placement":"inside",height:24,"border-radius":4,"fill-border-radius":0},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(),1)])),_:1},8,["percentage"])])),_:1},8,["label"]),(0,a.createVNode)(h,{label:i.text.size},{default:(0,a.withCtx)((()=>[(0,a.createVNode)(x,{type:"line",percentage:i.percentage.size,"indicator-placement":"inside",height:24,"border-radius":4,"fill-border-radius":0},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)(i.text.size),1)])),_:1},8,["percentage"])])),_:1},8,["label"]),(0,a.createVNode)(s,{type:"primary",block:"",strong:"",onClick:t[17]||(t[17]=e=>this.updatePwd(this.userInfo.oldpwd))},{default:(0,a.withCtx)((()=>[(0,a.createTextVNode)((0,a.toDisplayString)("user"===e.account.role?"立即升级":"会员续费"),1)])),_:1})])),_:1})])),_:1})):(0,a.createCommentVNode)("",!0)])),_:1})])),_:1})])),_:1})])),_:1},8,["show","on-after-enter"])}var et={setup(){const e=(0,h.Z)(),t=(0,a.ref)(!1),o=(0,a.ref)("profile"),n=(0,a.reactive)([{label:"基本信息",key:"profile"},{label:"绑定邮箱",key:"email"},{label:"修改密码",key:"password"},{label:"存储空间",key:"account"}]),l=(0,a.reactive)({disable:!0,uid:"",email:"",nickName:"",gender:"",oldpwd:"",pwd:"",rpwd:"",disabled:{editUserInfo:!0,updateEmail:!0,updatePwd:!0}}),i=[{label:"男",value:"MALE"},{label:"女",value:"FEMALE"},{label:"未知",value:"UNKNOWN"}];(0,a.watch)(l,(e=>{let t=new RegExp(/^\w+@[a-zA-Z0-9\.]{2,10}(?:\.[a-z]{2,4}){1,3}$/),o=new RegExp(/^(?![^a-zA-Z]+$)(?!\D+$)/);t.test(e.email)?l.disabled.updateEmail=!1:l.disabled.updateEmail=!0,o.test(e.pwd)&&e.pwd.length>=8&&e.pwd.length<=32&&e.pwd===e.rpwd?l.disabled.updatePwd=!1:l.disabled.updatePwd=!0}));const r={email:[{required:!0,validator(e,t){let o=/^\w+@[a-zA-Z0-9\.]{2,10}(?:\.[a-z]{2,4}){1,3}$/;return t?!!o.test(t)||new Error("邮箱格式错误"):new Error("请绑定尚未注册账号的邮箱")},trigger:"blur"}],pwd:[{required:!0,validator(e,t){var o=new RegExp(/^(?![^a-zA-Z]+$)(?!\D+$)/);return t?t.length<8||t.length>32?new Error("密码长度不小于 8 位，不大于 32 位"):!!o.test(t)||new Error("密码必须包含字母和数字"):new Error("请输入密码")},trigger:"blur"}],rpwd:[{required:!0,validator(e,t){return t===l.pwd},message:"两次密码输入不一致",trigger:["blur"]}]};return{showModal:t,activeMenu:o,menuOptions:n,userInfo:l,genderOptions:i,...e,rules:r}},computed:{...(0,u.rn)(["account"]),...(0,u.Se)(["user"]),role(){return"user"===this.account.role?"免费用户":"普通会员"},date_expire(){if(this.account.date_expire)return Date.parse((0,re.Z)(this.account.date_expire))},percentage(){return{file:Number((100*this.account.total_file/this.account.max_file).toFixed(2)),size:Number((100*this.account.total_size/this.account.max_size).toFixed(2))}},text(){return{file:`文稿个数: ${this.account.max_file-this.account.total_file}个可用,共${this.account.max_file} 个 `,size:`存储空间: ${(this.account.max_size-this.account.total_size).toFixed(2)} M可用,共${this.account.max_size} M `}}},mounted(){this.fetchUserInfo()},methods:{fetchUserInfo(){this.user&&(this.userInfo.uid=this.user.uid,this.userInfo.email=this.user.email,this.userInfo.nickName=this.user.nickName,this.userInfo.gender=this.user.gender)},...(0,u.OI)(["changeLoginState"]),updateUserInfo(){this.user.update((0,a.toRaw)(this.userInfo)).then((e=>{this.user.refresh(),this.success("信息更新成功")})).catch((e=>{}))},updateEmail(){this.user.updateEmail(this.userInfo.email).then((e=>{this.user.refresh(),this.success("邮件已发送，请登录邮箱确认绑定")})).catch((e=>{this.error("绑定邮箱失败")}))},updatePwd(e){this.user.updatePassword(this.userInfo.pwd,e).then((e=>{this.user.refresh(),this.success("修改成功")})).catch((e=>{this.error("修改失败")}))}}};const tt=(0,B.Z)(et,[["render",Xe]]);var ot=tt;const at={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},nt=(0,a.createElementVNode)("path",{d:"M104 496H72a24 24 0 0 1-24-24V328a24 24 0 0 1 24-24h32a24 24 0 0 1 24 24v144a24 24 0 0 1-24 24z",fill:"currentColor"},null,-1),lt=(0,a.createElementVNode)("path",{d:"M328 496h-32a24 24 0 0 1-24-24V232a24 24 0 0 1 24-24h32a24 24 0 0 1 24 24v240a24 24 0 0 1-24 24z",fill:"currentColor"},null,-1),it=(0,a.createElementVNode)("path",{d:"M440 496h-32a24 24 0 0 1-24-24V120a24 24 0 0 1 24-24h32a24 24 0 0 1 24 24v352a24 24 0 0 1-24 24z",fill:"currentColor"},null,-1),rt=(0,a.createElementVNode)("path",{d:"M216 496h-32a24 24 0 0 1-24-24V40a24 24 0 0 1 24-24h32a24 24 0 0 1 24 24v432a24 24 0 0 1-24 24z",fill:"currentColor"},null,-1),dt=[nt,lt,it,rt];var st=(0,a.defineComponent)({name:"StatsChart",render:function(e,t){return(0,a.openBlock)(),(0,a.createElementBlock)("svg",at,dt)}});const ct={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ut=(0,a.createElementVNode)("path",{d:"M352 48H160a48 48 0 0 0-48 48v368l144-128l144 128V96a48 48 0 0 0-48-48z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),ht=[ut];var pt=(0,a.defineComponent)({name:"BookmarkOutline",render:function(e,t){return(0,a.openBlock)(),(0,a.createElementBlock)("svg",ct,ht)}});const mt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ft=(0,a.createElementVNode)("rect",{x:"64",y:"176",width:"384",height:"256",rx:"28.87",ry:"28.87",fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"32"},null,-1),vt=(0,a.createElementVNode)("path",{stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32",d:"M144 80h224",fill:"currentColor"},null,-1),wt=(0,a.createElementVNode)("path",{stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32",d:"M112 128h288",fill:"currentColor"},null,-1),gt=[ft,vt,wt];var xt=(0,a.defineComponent)({name:"AlbumsOutline",render:function(e,t){return(0,a.openBlock)(),(0,a.createElementBlock)("svg",mt,gt)}});const kt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Ct=(0,a.createElementVNode)("path",{d:"M262.29 192.31a64 64 0 1 0 57.4 57.4a64.13 64.13 0 0 0-57.4-57.4zM416.39 256a154.34 154.34 0 0 1-1.53 20.79l45.21 35.46a10.81 10.81 0 0 1 2.45 13.75l-42.77 74a10.81 10.81 0 0 1-13.14 4.59l-44.9-18.08a16.11 16.11 0 0 0-15.17 1.75A164.48 164.48 0 0 1 325 400.8a15.94 15.94 0 0 0-8.82 12.14l-6.73 47.89a11.08 11.08 0 0 1-10.68 9.17h-85.54a11.11 11.11 0 0 1-10.69-8.87l-6.72-47.82a16.07 16.07 0 0 0-9-12.22a155.3 155.3 0 0 1-21.46-12.57a16 16 0 0 0-15.11-1.71l-44.89 18.07a10.81 10.81 0 0 1-13.14-4.58l-42.77-74a10.8 10.8 0 0 1 2.45-13.75l38.21-30a16.05 16.05 0 0 0 6-14.08c-.36-4.17-.58-8.33-.58-12.5s.21-8.27.58-12.35a16 16 0 0 0-6.07-13.94l-38.19-30A10.81 10.81 0 0 1 49.48 186l42.77-74a10.81 10.81 0 0 1 13.14-4.59l44.9 18.08a16.11 16.11 0 0 0 15.17-1.75A164.48 164.48 0 0 1 187 111.2a15.94 15.94 0 0 0 8.82-12.14l6.73-47.89A11.08 11.08 0 0 1 213.23 42h85.54a11.11 11.11 0 0 1 10.69 8.87l6.72 47.82a16.07 16.07 0 0 0 9 12.22a155.3 155.3 0 0 1 21.46 12.57a16 16 0 0 0 15.11 1.71l44.89-18.07a10.81 10.81 0 0 1 13.14 4.58l42.77 74a10.8 10.8 0 0 1-2.45 13.75l-38.21 30a16.05 16.05 0 0 0-6.05 14.08c.33 4.14.55 8.3.55 12.47z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),bt=[Ct];var yt=(0,a.defineComponent)({name:"SettingsOutline",render:function(e,t){return(0,a.openBlock)(),(0,a.createElementBlock)("svg",kt,bt)}});const Nt={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},Vt=(0,a.createElementVNode)("path",{d:"M304 336v40a40 40 0 0 1-40 40H104a40 40 0 0 1-40-40V136a40 40 0 0 1 40-40h152c22.09 0 48 17.91 48 40v40",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),_t=(0,a.createElementVNode)("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M368 336l80-80l-80-80"},null,-1),Bt=(0,a.createElementVNode)("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M176 256h256"},null,-1),It=[Vt,_t,Bt];var St=(0,a.defineComponent)({name:"LogOutOutline",render:function(e,t){return(0,a.openBlock)(),(0,a.createElementBlock)("svg",Nt,It)}});function Et(e){return()=>(0,a.h)(ce.NIcon,null,{default:()=>(0,a.h)(e)})}var Ft={setup(){const e=(0,u.oR)(),t=(0,a.computed)((()=>e.getters.user)),o=(0,a.ref)(t.value?"all-slides":"template-layout"),n=(0,h.Z)(),l=(0,a.reactive)([{label:"模板图表",key:"template-layout",icon:Et(st)},{label:"我的图表",key:"local-layout",icon:Et(pt)},{key:"divider-1",type:"divider"},{label:"演示文稿",key:"all-slides",icon:Et(xt),disabled:!0},{label:"我的分享",key:"shared-slides",icon:Et(_e),disabled:!0}]),i=(0,a.reactive)([{label:()=>(0,a.h)("a",{href:"https://vslide.cn",target:"_blank"},"文档"),key:"docs"}]);return{currentChartmenu:o,menuOptions:l,navValue:(0,a.ref)(""),navOptions:i,...n,key:(0,a.ref)(0),collapsed:(0,a.ref)(!1)}},components:{TemplateLayout:S,LocalLayout:Z,AllSlides:Te,SharedSlides:Ze,Login:Ke,User:ot},data(){return{options:[{label:"账号设置",key:"account",disabled:!1,icon:Et(yt)},{label:"退出登录",key:"logout",icon:Et(St)}],charts:[{label:"模板",key:"template-layout"},{label:"我的",key:"local-layout"},{label:"幻灯片",key:"all-slides"}]}},props:{rowHeight:Number},computed:{...(0,u.rn)(["atom","iActive","iMax","workingAreaKey","gallery","loginState","innerSize"]),...(0,u.Se)(["activeSlide","activeAtom","indexActive","activeSlideContent","getBackground","user"]),getLoginState(){return this.$store.state.loginState},nickName(){return this.user&&""!=this.user.nickName?this.user.nickName:"Hi"}},methods:{...(0,u.OI)(["initLocalAtom","changeStore","changeLoginState","changeDocumentFileList","initAccount","initSharedFileList"]),async signOut(){await this.$cloudbase.auth().signOut().then((()=>{this.changeLoginState({loginState:null})}))},handleSelect(e){switch(e){case"account":this.$refs.user.showModal=!0;break;case"logout":this.signOut();break}},changeNav(e,t){switch(e){case"docs":break;default:break}}},watch:{getLoginState:{handler(e){this.menuOptions[3].disabled=!e,this.menuOptions[4].disabled=!e},deep:!0,immediate:!0}}};o(9529);const At=(0,B.Z)(Ft,[["render",c],["__scopeId","data-v-0768dd9e"]]);var zt=At},6455:function(e,t,o){var a=o(1561);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var n=o(7037).Z;n("71ac950a",a,!0,{sourceMap:!1,shadowMode:!1})},8178:function(e,t,o){var a=o(7243);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var n=o(7037).Z;n("126ee741",a,!0,{sourceMap:!1,shadowMode:!1})},3387:function(e,t,o){var a=o(1886);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var n=o(7037).Z;n("70c5695e",a,!0,{sourceMap:!1,shadowMode:!1})},8548:function(e,t,o){var a=o(7022);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var n=o(7037).Z;n("6e14f149",a,!0,{sourceMap:!1,shadowMode:!1})},9260:function(e,t,o){var a=o(2013);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var n=o(7037).Z;n("5b2a60d6",a,!0,{sourceMap:!1,shadowMode:!1})},9529:function(e,t,o){var a=o(1426);a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);var n=o(7037).Z;n("6f7fbde6",a,!0,{sourceMap:!1,shadowMode:!1})}}]);